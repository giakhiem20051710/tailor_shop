<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep "T·∫†I SAO" Questions - Tailor Shop Interview Prep</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #1a2d4a 50%, #0a1628 100%);
            color: #eee;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.7;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #ffd700;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        h2 {
            color: #00d9ff;
            margin: 40px 0 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #00d9ff;
            font-size: 1.8em;
        }

        h3 {
            color: #00ff88;
            margin: 25px 0 15px;
            font-size: 1.3em;
        }

        h4 {
            color: #ff6b9d;
            margin: 20px 0 10px;
        }

        .section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .question-box {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.05));
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #ffd700;
            margin: 25px 0;
        }

        .question-title {
            color: #ffd700;
            font-size: 1.2em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .think-prompt {
            background: rgba(0, 217, 255, 0.1);
            padding: 12px 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 3px solid #00d9ff;
            font-style: italic;
        }

        .answer-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }

        .answer-toggle {
            background: linear-gradient(135deg, #00ff88, #00d9ff);
            color: #000;
            padding: 12px 20px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .answer-toggle:hover {
            filter: brightness(1.1);
        }

        .answer-content {
            padding: 20px;
            display: none;
        }

        .answer-content.show {
            display: block;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 14px;
        }

        th,
        td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        th {
            background: rgba(0, 217, 255, 0.2);
            color: #00d9ff;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        code {
            background: rgba(0, 0, 0, 0.4);
            padding: 2px 8px;
            border-radius: 4px;
            color: #00ff88;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        pre {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        pre code {
            padding: 0;
            background: transparent;
            color: #e6e6e6;
        }

        .keyword {
            color: #ff79c6;
        }

        .string {
            color: #f1fa8c;
        }

        .comment {
            color: #6272a4;
        }

        .function {
            color: #50fa7b;
        }

        .annotation {
            color: #ffb86c;
        }

        .lesson-box {
            background: linear-gradient(135deg, rgba(156, 39, 176, 0.2), rgba(103, 58, 183, 0.1));
            padding: 15px 20px;
            border-radius: 10px;
            border-left: 4px solid #9c27b0;
            margin: 20px 0;
        }

        .lesson-box strong {
            color: #ce93d8;
        }

        .lesson-box blockquote {
            margin-top: 10px;
            font-style: italic;
            color: #ddd;
            padding-left: 15px;
            border-left: 2px solid #ce93d8;
        }

        ul,
        ol {
            padding-left: 25px;
            margin: 15px 0;
        }

        li {
            margin: 8px 0;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 8px;
        }

        .badge-architecture {
            background: #9c27b0;
            color: white;
        }

        .badge-flashsale {
            background: #ff5722;
            color: white;
        }

        .badge-order {
            background: #2196f3;
            color: white;
        }

        .badge-security {
            background: #f44336;
            color: white;
        }

        .badge-event {
            background: #4caf50;
            color: white;
        }

        .badge-data {
            background: #ff9800;
            color: black;
        }

        .badge-performance {
            background: #00bcd4;
            color: black;
        }

        .mermaid {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .toc {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
        }

        .toc h3 {
            margin-top: 0;
        }

        .toc ul {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 10px;
        }

        .toc a {
            color: #00d9ff;
            text-decoration: none;
            padding: 8px 12px;
            display: block;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .toc a:hover {
            background: rgba(0, 217, 255, 0.1);
        }

        .framework-box {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 165, 0, 0.1));
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #ffd700;
            margin: 30px 0;
        }

        .framework-box h3 {
            color: #ffd700;
            margin-top: 0;
        }

        .tip-box {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 200, 100, 0.05));
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #00ff88;
            margin: 25px 0;
        }

        .back-link {
            display: inline-block;
            color: #00d9ff;
            text-decoration: none;
            margin-bottom: 20px;
            padding: 10px 20px;
            border: 1px solid #00d9ff;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            background: rgba(0, 217, 255, 0.2);
        }

        footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #666;
        }
    </style>
</head>

<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Quay l·∫°i trang ch√≠nh</a>

        <h1>ü§î Deep "T·∫†I SAO" Questions</h1>
        <p class="subtitle">N√¢ng cao t∆∞ duy gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ cho ph·ªèng v·∫•n</p>

        <!-- How to use -->
        <div class="section">
            <h2>üìö C√°ch S·ª≠ D·ª•ng T√†i Li·ªáu N√†y</h2>
            <ol>
                <li><strong>ƒê·ªçc c√¢u h·ªèi</strong> - Suy nghƒ© tr∆∞·ªõc khi xem ƒë√°p √°n</li>
                <li><strong>T·ª± tr·∫£ l·ªùi</strong> - Vi·∫øt ra l√Ω do theo suy nghƒ© c·ªßa b·∫°n</li>
                <li><strong>So s√°nh</strong> - Click xem ƒë√°p √°n v√† hi·ªÉu trade-offs</li>
                <li><strong>M·ªü r·ªông</strong> - Nghƒ© th√™m c√°c c√°ch ti·∫øp c·∫≠n kh√°c</li>
            </ol>
        </div>

        <!-- TOC -->
        <div class="toc">
            <h3>üìë M·ª•c L·ª•c - 15 C√¢u H·ªèi</h3>
            <ul>
                <li><a href="#q1"><span class="badge badge-architecture">Architecture</span> Q1: Modular Monolith vs
                        Microservices</a></li>
                <li><a href="#q2"><span class="badge badge-architecture">Architecture</span> Q2: Module Boundaries</a>
                </li>
                <li><a href="#q3"><span class="badge badge-flashsale">Flash Sale</span> Q3: Pessimistic vs Optimistic
                        Locking</a></li>
                <li><a href="#q4"><span class="badge badge-flashsale">Flash Sale</span> Q4: Reservation System</a></li>
                <li><a href="#q5"><span class="badge badge-flashsale">Flash Sale</span> Q5: Scheduled Tasks</a></li>
                <li><a href="#q6"><span class="badge badge-order">Order</span> Q6: 10+ Order Statuses</a></li>
                <li><a href="#q7"><span class="badge badge-order">Order</span> Q7: Timeline/Audit Log</a></li>
                <li><a href="#q8"><span class="badge badge-security">Security</span> Q8: JWT vs Session</a></li>
                <li><a href="#q9"><span class="badge badge-security">Security</span> Q9: Dual Token Strategy</a></li>
                <li><a href="#q10"><span class="badge badge-security">Security</span> Q10: Multi-layer Rate Limiting</a>
                </li>
                <li><a href="#q11"><span class="badge badge-event">Event</span> Q11: Spring Events vs Kafka</a></li>
                <li><a href="#q12"><span class="badge badge-event">Event</span> Q12: Sync vs Async</a></li>
                <li><a href="#q13"><span class="badge badge-data">Data</span> Q13: Soft Delete vs Hard Delete</a></li>
                <li><a href="#q14"><span class="badge badge-data">Data</span> Q14: Measurement Versioning</a></li>
                <li><a href="#q15"><span class="badge badge-performance">Performance</span> Q15: Redis Cache</a></li>
            </ul>
        </div>

        <!-- ARCHITECTURE SECTION -->
        <div class="section">
            <h2>üèóÔ∏è ARCHITECTURE & DESIGN</h2>

            <!-- Q1 -->
            <div class="question-box" id="q1">
                <div class="question-title">
                    <span class="badge badge-architecture">Q1</span>
                    T·∫°i sao ch·ªçn Modular Monolith thay v√¨ Microservices?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> Microservices ƒëang r·∫•t "hot", t·∫°i sao kh√¥ng d√πng?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>Ph√¢n t√≠ch v·∫•n ƒë·ªÅ:</h4>
                        <ul>
                            <li>Team size: 1-2 ng∆∞·ªùi</li>
                            <li>Timeline: C·∫ßn release nhanh</li>
                            <li>Complexity: Ch∆∞a c·∫ßn scale ri√™ng t·ª´ng service</li>
                        </ul>

                        <h4>T·∫°i sao KH√îNG ch·ªçn Microservices:</h4>
                        <ol>
                            <li><strong>Overhead cao:</strong> Service discovery, API gateway, distributed tracing,
                                network latency</li>
                            <li><strong>Debugging kh√≥:</strong> Log ph√¢n t√°n, request qua nhi·ªÅu service</li>
                            <li><strong>Data consistency:</strong> Distributed transactions ph·ª©c t·∫°p (Saga pattern, 2PC)
                            </li>
                            <li><strong>Deployment complexity:</strong> CI/CD cho 15+ services</li>
                        </ol>

                        <h4>T·∫°i sao CH·ªåN Modular Monolith:</h4>
                        <ol>
                            <li><strong>Rapid development:</strong> Debug d·ªÖ, single deployment</li>
                            <li><strong>Module boundaries r√µ r√†ng:</strong> C√≥ th·ªÉ t√°ch th√†nh Microservices sau</li>
                            <li><strong>Shared database:</strong> D·ªÖ join, transaction ƒë∆°n gi·∫£n</li>
                            <li><strong>Low latency:</strong> Kh√¥ng c√≥ network hop gi·ªØa modules</li>
                        </ol>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Start with a modular monolith, evolve to microservices when you have the pain
                                of a monolith and the resources to handle microservices complexity."</blockquote>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q2 -->
            <div class="question-box" id="q2">
                <div class="question-title">
                    <span class="badge badge-architecture">Q2</span>
                    T·∫°i sao t√°ch th√†nh 15 modules thay v√¨ √≠t h∆°n ho·∫∑c nhi·ªÅu h∆°n?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> L√†m sao x√°c ƒë·ªãnh boundary c·ªßa m·ªói module?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>Nguy√™n t·∫Øc ƒë√£ √°p d·ª•ng:</h4>

                        <p><strong>1. Single Responsibility:</strong> M·ªói module l√†m M·ªòT vi·ªác ch√≠nh</p>
                        <ul>
                            <li>OrderModule: Qu·∫£n l√Ω ƒë∆°n h√†ng</li>
                            <li>AuthModule: Authentication/Authorization</li>
                        </ul>

                        <p><strong>2. Domain-Driven Design (DDD):</strong></p>
                        <ul>
                            <li>Bounded Context: Order ‚â† Invoice (d√π li√™n quan)</li>
                            <li>Ubiquitous Language: "Order" trong OrderModule kh√°c "Order" trong ReportModule</li>
                        </ul>

                        <p><strong>3. Dependency Direction:</strong></p>
                        <pre><code>Controller ‚Üí Service ‚Üí Repository
Module A ‚Üí Interface ‚Üí Module B (kh√¥ng ph·ª• thu·ªôc implementation)</code></pre>

                        <h4>T·∫°i sao kh√¥ng G·ªòP Order + Billing?</h4>
                        <ul>
                            <li>Lifecycle kh√°c nhau: Order c√≥ th·ªÉ COMPLETED nh∆∞ng Invoice c√≤n PENDING</li>
                            <li>ƒê·ªôi ng≈© kh√°c nhau c√≥ th·ªÉ develop song song</li>
                            <li>C√≥ th·ªÉ reuse BillingModule cho Subscription sau n√†y</li>
                        </ul>

                        <h4>T·∫°i sao kh√¥ng T√ÅCH Product th√†nh ProductCatalog + ProductInventory?</h4>
                        <ul>
                            <li>Ch∆∞a c√≥ pain point: Kh√¥ng c√≥ team ri√™ng, kh√¥ng c·∫ßn scale ri√™ng</li>
                            <li>Complexity kh√¥ng ƒë√°ng: Th√™m API calls n·ªôi b·ªô</li>
                        </ul>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Split when you feel the pain of coupling, not before."</blockquote>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- FLASH SALE SECTION -->
        <div class="section">
            <h2>‚ö° FLASH SALE SYSTEM</h2>

            <!-- Q3 -->
            <div class="question-box" id="q3">
                <div class="question-title">
                    <span class="badge badge-flashsale">Q3</span>
                    T·∫°i sao d√πng Pessimistic Locking thay v√¨ Optimistic Locking cho Flash Sale?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> Optimistic Locking (version field) c√≥ v·∫ª ƒë∆°n gi·∫£n h∆°n?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>So s√°nh hai approach:</h4>
                        <table>
                            <tr>
                                <th>Ti√™u ch√≠</th>
                                <th>Optimistic Locking</th>
                                <th>Pessimistic Locking</th>
                            </tr>
                            <tr>
                                <td>Lock timing</td>
                                <td>Khi UPDATE (cu·ªëi transaction)</td>
                                <td>Khi SELECT (ƒë·∫ßu transaction)</td>
                            </tr>
                            <tr>
                                <td>Conflict detection</td>
                                <td>Sau khi x·ª≠ l√Ω xong</td>
                                <td>Tr∆∞·ªõc khi x·ª≠ l√Ω</td>
                            </tr>
                            <tr>
                                <td>Retry needed</td>
                                <td>C√≥ (khi version mismatch)</td>
                                <td>Kh√¥ng</td>
                            </tr>
                            <tr>
                                <td>Best for</td>
                                <td>Low contention</td>
                                <td>High contention</td>
                            </tr>
                        </table>

                        <h4>Scenario Flash Sale (1000 ng∆∞·ªùi mua c√πng l√∫c):</h4>

                        <p><strong>N·∫øu d√πng Optimistic:</strong></p>
                        <pre><code>User A: SELECT stock=10 ‚Üí process ‚Üí UPDATE stock=9 ‚úì
User B: SELECT stock=10 ‚Üí process ‚Üí UPDATE stock=9 ‚úó (version mismatch)
User C: SELECT stock=10 ‚Üí process ‚Üí UPDATE stock=9 ‚úó
... 998 users fail v√† ph·∫£i retry</code></pre>
                        <p>‚Üí <strong style="color: #ff6b6b;">999 users ph·∫£i retry</strong> = waste CPU, poor UX</p>

                        <p><strong>N·∫øu d√πng Pessimistic:</strong></p>
                        <pre><code>User A: SELECT FOR UPDATE (lock) ‚Üí process ‚Üí UPDATE ‚Üí release
User B: WAIT for lock ‚Üí SELECT ‚Üí process ‚Üí UPDATE
... (queue style)</code></pre>
                        <p>‚Üí <strong style="color: #00ff88;">Sequential processing</strong> = no wasted work</p>

                        <h4>T·∫°i sao CH·ªåN Pessimistic:</h4>
                        <ol>
                            <li><strong>High contention:</strong> 1000 concurrent requests</li>
                            <li><strong>Wasted work:</strong> V·ªõi Optimistic, 999 transactions l√†m vi·ªác v√¥ √≠ch</li>
                            <li><strong>Better UX:</strong> User bi·∫øt ngay k·∫øt qu·∫£</li>
                        </ol>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Choose locking strategy based on contention level, not simplicity."
                            </blockquote>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q4 -->
            <div class="question-box" id="q4">
                <div class="question-title">
                    <span class="badge badge-flashsale">Q4</span>
                    T·∫°i sao c·∫ßn Reservation System thay v√¨ tr·ª´ stock ngay?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> T·∫°i sao kh√¥ng tr·ª´ stock khi user click "Mua"?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>V·∫•n ƒë·ªÅ n·∫øu tr·ª´ stock ngay:</h4>
                        <pre><code><span class="comment">// User A click Mua ‚Üí stock = 10 - 1 = 9</span>
<span class="comment">// User A nh·∫£y qua trang thanh to√°n...</span>
<span class="comment">// User A ƒë·ªïi √Ω, close tab</span>

<span class="comment">// Result: stock = 9 nh∆∞ng kh√¥ng ai mua</span>
<span class="comment">// ‚Üí M·∫§T 1 SLOT Vƒ®NH VI·ªÑN!</span></code></pre>

                        <h4>Solution: Reservation (Gi·ªØ h√†ng t·∫°m th·ªùi)</h4>
                        <pre><code><span class="comment">// User A click Mua</span>
reservation created (10 ph√∫t)
reservedQuantity += 1

<span class="comment">// N·∫øu thanh to√°n:</span>
reservation ‚Üí CONVERTED
soldQuantity += 1

<span class="comment">// N·∫øu timeout/cancel:</span>
reservation ‚Üí EXPIRED
reservedQuantity -= 1  <span class="comment">// Stock available l·∫°i!</span></code></pre>

                        <h4>C√¥ng th·ª©c stock:</h4>
                        <pre><code><span class="function">availableStock</span> = totalQuantity - soldQuantity - reservedQuantity</code></pre>

                        <h4>T·∫°i sao 10 ph√∫t?</h4>
                        <ul>
                            <li>ƒê·ªß th·ªùi gian ƒëi·ªÅn form thanh to√°n (~2-3 ph√∫t)</li>
                            <li>ƒê·ªß th·ªùi gian chuy·ªÉn kho·∫£n (~5 ph√∫t)</li>
                            <li>Kh√¥ng qu√° l√¢u ƒë·ªÉ block ng∆∞·ªùi kh√°c</li>
                        </ul>

                        <h4>Real-world examples:</h4>
                        <ul>
                            <li>ƒê·∫∑t v√© m√°y bay: Gi·ªØ gh·∫ø 15 ph√∫t</li>
                            <li>Mua v√© concert: Gi·ªØ 10 ph√∫t</li>
                            <li>Shopee Flash Sale: Gi·ªØ 5-10 ph√∫t</li>
                        </ul>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Think about failure cases BEFORE implementing the happy path."</blockquote>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q5 -->
            <div class="question-box" id="q5">
                <div class="question-title">
                    <span class="badge badge-flashsale">Q5</span>
                    T·∫°i sao d√πng Scheduled Tasks thay v√¨ check expiration khi user request?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> C√≥ th·ªÉ check reservation expired khi user query, t·∫°i sao c·∫ßn
                    background job?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>Approach 1: Lazy check (khi user request)</h4>
                        <pre><code><span class="keyword">public int</span> <span class="function">getAvailableStock</span>() {
    <span class="comment">// M·ªói l·∫ßn query ph·∫£i check t·∫•t c·∫£ reservations</span>
    releaseExpiredReservations(); <span class="comment">// ‚Üê expensive!</span>
    <span class="keyword">return</span> calculateStock();
}</code></pre>
                        <p><strong style="color: #ff6b6b;">V·∫•n ƒë·ªÅ:</strong></p>
                        <ul>
                            <li>Latency spike: User request ph·∫£i ƒë·ª£i cleanup</li>
                            <li>Inconsistent: Stock ch·ªâ update khi c√≥ request</li>
                            <li>Race condition: 2 users c√πng cleanup ‚Üí bugs</li>
                        </ul>

                        <h4>Approach 2: Eager cleanup (Scheduled Task)</h4>
                        <pre><code><span class="annotation">@Scheduled</span>(fixedRate = <span class="string">30000</span>) <span class="comment">// Every 30 seconds</span>
<span class="keyword">public void</span> <span class="function">releaseExpiredReservations</span>() {
    List&lt;Reservation&gt; expired = reservationRepository.findExpired(LocalDateTime.now());
    <span class="keyword">for</span> (Reservation r : expired) {
        flashSale.setReservedQuantity(
            flashSale.getReservedQuantity().subtract(r.getQuantity())
        );
        r.setStatus(EXPIRED);
    }
}</code></pre>
                        <p><strong style="color: #00ff88;">L·ª£i √≠ch:</strong></p>
                        <ul>
                            <li>Consistent: Stock lu√¥n accurate (max 30 gi√¢y delay)</li>
                            <li>Low latency: User request kh√¥ng c·∫ßn cleanup</li>
                            <li>Single point: M·ªôt job cleanup, kh√¥ng race condition</li>
                        </ul>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Background jobs are often better than on-demand processing for cleanup tasks."
                            </blockquote>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ORDER MANAGEMENT SECTION -->
        <div class="section">
            <h2>üìã ORDER MANAGEMENT</h2>

            <!-- Q6 -->
            <div class="question-box" id="q6">
                <div class="question-title">
                    <span class="badge badge-order">Q6</span>
                    T·∫°i sao Order c√≥ 10+ tr·∫°ng th√°i thay v√¨ 3-4 tr·∫°ng th√°i ƒë∆°n gi·∫£n?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> PENDING ‚Üí PROCESSING ‚Üí COMPLETED c√≥ v·∫ª ƒë·ªß?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>ƒê·∫∑c th√π ng√†nh may ƒëo:</h4>

                        <p><strong>Order th∆∞·ªùng (e-commerce):</strong></p>
                        <pre><code>PENDING ‚Üí PAID ‚Üí SHIPPED ‚Üí DELIVERED</code></pre>

                        <p><strong>Order may ƒëo:</strong></p>
                        <pre><code>DRAFT ‚Üí WAITING_FOR_QUOTE ‚Üí CONFIRMED ‚Üí IN_PROGRESS ‚Üí 
FITTING ‚Üí ADJUSTING ‚Üí READY ‚Üí DELIVERING ‚Üí DELIVERED</code></pre>

                        <h4>T·∫°i sao c·∫ßn nhi·ªÅu tr·∫°ng th√°i:</h4>
                        <ol>
                            <li><strong>Business visibility:</strong> Kh√°ch mu·ªën bi·∫øt "ƒê∆°n ƒëang ·ªü b∆∞·ªõc n√†o?"</li>
                            <li><strong>Workflow control:</strong> Kh√¥ng th·ªÉ skip: FITTING ‚Üí READY</li>
                            <li><strong>Reporting:</strong> "C√≥ bao nhi√™u ƒë∆°n stuck ·ªü WAITING_FOR_QUOTE?"</li>
                            <li><strong>Integration:</strong> Status = CONFIRMED ‚Üí Auto create Invoice</li>
                        </ol>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Model your domain, not a generic solution. E-commerce ‚â† Tailoring."
                            </blockquote>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q7 -->
            <div class="question-box" id="q7">
                <div class="question-title">
                    <span class="badge badge-order">Q7</span>
                    T·∫°i sao d√πng Timeline/Audit Log thay v√¨ ch·ªâ l∆∞u current status?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> C·∫ßn g√¨ ngo√†i order.status = COMPLETED?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>V·∫•n ƒë·ªÅ khi ch·ªâ l∆∞u current status:</h4>
                        <pre><code><span class="comment">"ƒê∆°n h√†ng n√†y stuck ·ªü WAITING_FOR_QUOTE bao l√¢u r·ªìi?"</span>
‚Üí Kh√¥ng bi·∫øt! Ch·ªâ c√≥ current status

<span class="comment">"Ai ƒë√£ chuy·ªÉn ƒë∆°n sang CANCELLED?"</span>
‚Üí Kh√¥ng bi·∫øt! Kh√¥ng c√≥ history</code></pre>

                        <h4>Solution: Timeline Entity</h4>
                        <pre><code><span class="annotation">@Entity</span>
<span class="keyword">public class</span> <span class="function">OrderTimeline</span> {
    <span class="keyword">private</span> Long orderId;
    <span class="keyword">private</span> OrderStatus status;
    <span class="keyword">private</span> String note;          <span class="comment">// "Kh√°ch y√™u c·∫ßu s·ª≠a"</span>
    <span class="keyword">private</span> Long createdById;     <span class="comment">// User n√†o th·ª±c hi·ªán</span>
    <span class="keyword">private</span> Instant createdAt;    <span class="comment">// Th·ªùi ƒëi·ªÉm</span>
}</code></pre>

                        <h4>Use cases:</h4>
                        <ol>
                            <li><strong>Customer tracking:</strong> "ƒê∆°n h√†ng c·ªßa b·∫°n ƒëang ·ªü b∆∞·ªõc 3/7"</li>
                            <li><strong>SLA monitoring:</strong> "ƒê∆°n t·ª´ CONFIRMED ‚Üí IN_PROGRESS m·∫•t 3 ng√†y"</li>
                            <li><strong>Dispute resolution:</strong> "Ai cancel ƒë∆°n n√†y? ‚Üí User X l√∫c 10:30"</li>
                            <li><strong>Analytics:</strong> "Average time per status?"</li>
                        </ol>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Log significant state changes. Debug production issues is 10x harder without
                                history."</blockquote>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECURITY SECTION -->
        <div class="section">
            <h2>üîê SECURITY</h2>

            <!-- Q8 -->
            <div class="question-box" id="q8">
                <div class="question-title">
                    <span class="badge badge-security">Q8</span>
                    T·∫°i sao d√πng JWT thay v√¨ Session-based Authentication?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> Session ƒë∆°n gi·∫£n h∆°n, t·∫°i sao ph·ª©c t·∫°p h√≥a?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>So s√°nh:</h4>
                        <table>
                            <tr>
                                <th>Ti√™u ch√≠</th>
                                <th>Session-based</th>
                                <th>JWT</th>
                            </tr>
                            <tr>
                                <td>Storage</td>
                                <td>Server-side (Redis/DB)</td>
                                <td>Client-side (token)</td>
                            </tr>
                            <tr>
                                <td>Scalability</td>
                                <td>C·∫ßn shared session store</td>
                                <td>Stateless, scale d·ªÖ</td>
                            </tr>
                            <tr>
                                <td>Mobile support</td>
                                <td>Cookie issues</td>
                                <td>Header-based, d·ªÖ</td>
                            </tr>
                            <tr>
                                <td>Microservices</td>
                                <td>Session sync gi·ªØa services</td>
                                <td>Token verify ƒë·ªôc l·∫≠p</td>
                            </tr>
                        </table>

                        <h4>T·∫°i sao CH·ªåN JWT:</h4>
                        <ol>
                            <li><strong>Stateless API:</strong> REST API thu·∫ßn, kh√¥ng c·∫ßn server remember state</li>
                            <li><strong>Mobile-ready:</strong> React Native, Flutter kh√¥ng d√πng cookie t·ªët</li>
                            <li><strong>Future-proof:</strong> N·∫øu t√°ch Microservices: JWT verify ƒë·ªôc l·∫≠p</li>
                        </ol>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Choose authentication strategy based on your architecture (API, Mobile,
                                Microservices)."</blockquote>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q9 -->
            <div class="question-box" id="q9">
                <div class="question-title">
                    <span class="badge badge-security">Q9</span>
                    T·∫°i sao Access Token ng·∫Øn (15-30 ph√∫t) + Refresh Token d√†i (7 ng√†y)?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> T·∫°i sao kh√¥ng 1 token duy nh·∫•t?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>V·∫•n ƒë·ªÅ v·ªõi 1 token d√†i h·∫°n:</h4>
                        <pre><code>Token expire: 7 ng√†y
N·∫øu b·ªã steal ‚Üí Attacker c√≥ 7 ng√†y ƒë·ªÉ exploit
Kh√¥ng th·ªÉ revoke ‚Üí Ph·∫£i ƒë·ª£i expire</code></pre>

                        <h4>Solution: Dual Token Strategy</h4>
                        <pre><code>Access Token: 15 ph√∫t, d√πng cho m·ªçi API request
Refresh Token: 7 ng√†y, ch·ªâ d√πng ƒë·ªÉ l·∫•y Access Token m·ªõi</code></pre>

                        <h4>Security benefits:</h4>
                        <ol>
                            <li><strong>Minimize exposure:</strong> Access token b·ªã steal ‚Üí Attacker ch·ªâ c√≥ 15 ph√∫t</li>
                            <li><strong>Revocation possible:</strong> Refresh token l∆∞u DB ‚Üí C√≥ th·ªÉ revoke ngay</li>
                            <li><strong>Separate responsibilities:</strong> Access token stateless, Refresh token c√≥ th·ªÉ
                                lookup DB</li>
                        </ol>

                        <h4>Flow:</h4>
                        <pre><code>1. Login ‚Üí Access Token (15m) + Refresh Token (7d)
2. API requests ‚Üí Use Access Token
3. Access Token expire ‚Üí Call /refresh ‚Üí New Access Token
4. Logout ‚Üí Revoke Refresh Token trong DB</code></pre>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Security is about minimizing blast radius, not preventing all attacks."
                            </blockquote>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q10 -->
            <div class="question-box" id="q10">
                <div class="question-title">
                    <span class="badge badge-security">Q10</span>
                    T·∫°i sao c·∫ßn Rate Limiting cho Login v√† OTP?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> C√≥ brute-force protection r·ªìi, c·∫ßn g√¨ th√™m?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>C√°c lo·∫°i attack c·∫ßn ch·ªëng:</h4>
                        <table>
                            <tr>
                                <th>Attack</th>
                                <th>Pattern</th>
                                <th>Solution</th>
                            </tr>
                            <tr>
                                <td>Brute-force password</td>
                                <td>10000 passwords cho 1 account</td>
                                <td>Lock account sau 5 l·∫ßn sai</td>
                            </tr>
                            <tr>
                                <td>Credential stuffing</td>
                                <td>1 password cho 10000 accounts</td>
                                <td>Rate limit per IP</td>
                            </tr>
                            <tr>
                                <td>OTP bombing</td>
                                <td>Spam /forgot-password</td>
                                <td>Rate limit OTP requests</td>
                            </tr>
                        </table>

                        <h4>Multi-layer protection:</h4>
                        <pre><code><span class="comment">// Layer 1: Account-level (5 attempts, lock 15 min)</span>
loginAttemptService.checkBlocked(username);

<span class="comment">// Layer 2: IP-level (100 requests/minute)</span>
rateLimiter.checkIPLimit(request.getRemoteAddr());

<span class="comment">// Layer 3: OTP-level (3 requests/30 min per email)</span>
otpRateLimiter.checkLimit(email);</code></pre>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Defense in depth: Multiple layers of protection, each addressing different
                                attack vectors."</blockquote>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- EVENT-DRIVEN SECTION -->
        <div class="section">
            <h2>üîÑ EVENT-DRIVEN ARCHITECTURE</h2>

            <!-- Q11 -->
            <div class="question-box" id="q11">
                <div class="question-title">
                    <span class="badge badge-event">Q11</span>
                    T·∫°i sao d√πng Spring Events thay v√¨ Kafka/RabbitMQ?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> Kafka m·∫°nh h∆°n, t·∫°i sao kh√¥ng d√πng?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>So s√°nh:</h4>
                        <table>
                            <tr>
                                <th>Feature</th>
                                <th>Spring Events</th>
                                <th>Kafka/RabbitMQ</th>
                            </tr>
                            <tr>
                                <td>Setup</td>
                                <td>Zero config</td>
                                <td>Install broker, config</td>
                            </tr>
                            <tr>
                                <td>Persistence</td>
                                <td>No</td>
                                <td>Yes (replay events)</td>
                            </tr>
                            <tr>
                                <td>Cross-service</td>
                                <td>No (in-process)</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td>Throughput</td>
                                <td>High</td>
                                <td>Very high</td>
                            </tr>
                        </table>

                        <h4>T·∫°i sao CH·ªåN Spring Events:</h4>
                        <ol>
                            <li><strong>Monolith architecture:</strong> T·∫•t c·∫£ modules trong 1 process</li>
                            <li><strong>Simplicity:</strong> Kh√¥ng th√™m infrastructure burden</li>
                            <li><strong>Good enough:</strong> At-most-once ƒë·ªß cho email, invoice</li>
                        </ol>

                        <h4>Khi n√†o upgrade l√™n Kafka:</h4>
                        <ul>
                            <li>Microservices: Events qua network</li>
                            <li>Event replay: Debug, rebuild state</li>
                            <li>High throughput: 100K+ events/second</li>
                        </ul>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Start simple, add complexity when you have the pain."</blockquote>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q12 -->
            <div class="question-box" id="q12">
                <div class="question-title">
                    <span class="badge badge-event">Q12</span>
                    T·∫°i sao d√πng @Async thay v√¨ process sync?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> Async th√™m complexity, ƒë√°ng kh√¥ng?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>Sync approach:</h4>
                        <pre><code><span class="keyword">public</span> OrderResponse <span class="function">createOrder</span>(OrderRequest request) {
    Order order = saveOrder(request);           <span class="comment">// 50ms</span>
    invoiceService.createInvoice(order);        <span class="comment">// 100ms</span>
    emailService.sendConfirmation(order);       <span class="comment">// 2000ms (SMTP slow!)</span>
    smsService.sendNotification(order);         <span class="comment">// 1500ms</span>
    <span class="keyword">return</span> toResponse(order);
}
<span class="comment">// Total: 3650ms - User ph·∫£i ƒë·ª£i 3.6 gi√¢y!</span></code></pre>

                        <h4>Async approach:</h4>
                        <pre><code><span class="keyword">public</span> OrderResponse <span class="function">createOrder</span>(OrderRequest request) {
    Order order = saveOrder(request);           <span class="comment">// 50ms</span>
    eventPublisher.publishEvent(<span class="keyword">new</span> OrderCreatedEvent(order)); <span class="comment">// &lt;1ms</span>
    <span class="keyword">return</span> toResponse(order);
}
<span class="comment">// Total: ~100ms - User nh·∫≠n response ngay!</span>

<span class="annotation">@Async</span>
<span class="annotation">@EventListener</span>
<span class="keyword">public void</span> <span class="function">sendEmail</span>(OrderCreatedEvent event) {
    emailService.sendConfirmation(event.getOrder()); <span class="comment">// Background</span>
}</code></pre>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Don't make users wait for non-critical operations."</blockquote>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DATA DESIGN SECTION -->
        <div class="section">
            <h2>üóÑÔ∏è DATA DESIGN</h2>

            <!-- Q13 -->
            <div class="question-box" id="q13">
                <div class="question-title">
                    <span class="badge badge-data">Q13</span>
                    T·∫°i sao d√πng Soft Delete thay v√¨ Hard Delete?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> DELETE FROM users ƒë∆°n gi·∫£n h∆°n?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>Hard Delete vs Soft Delete:</h4>
                        <pre><code><span class="comment">-- Hard Delete</span>
<span class="keyword">DELETE FROM</span> users <span class="keyword">WHERE</span> id = 1;
<span class="comment">-- Data m·∫•t vƒ©nh vi·ªÖn!</span>

<span class="comment">-- Soft Delete</span>
<span class="keyword">UPDATE</span> users <span class="keyword">SET</span> is_deleted = <span class="keyword">true</span> <span class="keyword">WHERE</span> id = 1;
<span class="comment">-- Data v·∫´n c√≤n!</span></code></pre>

                        <h4>T·∫°i sao CH·ªåN Soft Delete:</h4>
                        <ol>
                            <li><strong>Recovery:</strong> "√îi, t√¥i x√≥a nh·∫ßm user!" ‚Üí S·ª≠a is_deleted = false</li>
                            <li><strong>Audit trail:</strong> "User n√†y c√≥ ƒë∆°n h√†ng n√†o kh√¥ng?" ‚Üí JOIN ƒë∆∞·ª£c</li>
                            <li><strong>Data integrity:</strong> Order references User ‚Üí Foreign key intact</li>
                            <li><strong>Legal compliance:</strong> GDPR: Financial records ph·∫£i gi·ªØ 7 nƒÉm</li>
                        </ol>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Data is valuable. Delete is expensive to undo."</blockquote>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Q14 -->
            <div class="question-box" id="q14">
                <div class="question-title">
                    <span class="badge badge-data">Q14</span>
                    T·∫°i sao Measurement c·∫ßn Versioning?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> Override s·ªë ƒëo c≈© kh√¥ng ƒë∆∞·ª£c sao?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>V·∫•n ƒë·ªÅ v·ªõi override:</h4>
                        <pre><code>Th√°ng 1: User ƒëo ng·ª±c 95cm ‚Üí l∆∞u
Th√°ng 6: User ƒëo l·∫°i 98cm ‚Üí override ‚Üí <span class="comment">m·∫•t 95cm!</span>

Order th√°ng 2 reference s·ªë ƒëo n√†o? 
‚Üí Kh√¥ng r√µ! Order ghi 95cm nh∆∞ng DB ch·ªâ c√≥ 98cm</code></pre>

                        <h4>Solution: Immutable Versioning</h4>
                        <pre><code><span class="annotation">@Entity</span>
<span class="keyword">public class</span> <span class="function">Measurement</span> {
    <span class="keyword">private</span> UUID groupId;    <span class="comment">// Nh√≥m c√°c versions c·ªßa 1 user</span>
    <span class="keyword">private int</span> version;     <span class="comment">// 1, 2, 3...</span>
    <span class="keyword">private</span> Long userId;
    <span class="keyword">private</span> BigDecimal chest;
}

<span class="comment">// Kh√¥ng update, lu√¥n t·∫°o m·ªõi</span>
<span class="keyword">public</span> Measurement <span class="function">update</span>(Long userId, MeasurementRequest request) {
    Measurement latest = findLatest(userId);
    <span class="keyword">return</span> Measurement.builder()
        .groupId(latest.getGroupId())
        .version(latest.getVersion() + 1)  <span class="comment">// Increment</span>
        .build();
}</code></pre>

                        <h4>Benefits:</h4>
                        <ul>
                            <li><strong>Order integrity:</strong> Order reference version c·ª• th·ªÉ</li>
                            <li><strong>Progress tracking:</strong> "S·ªë ƒëo thay ƒë·ªïi th·∫ø n√†o qua th·ªùi gian?"</li>
                            <li><strong>Dispute resolution:</strong> "T√¥i ƒëo 95cm m√† sao √°o ch·∫≠t?" ‚Üí Check version</li>
                        </ul>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Immutability simplifies debugging and auditing."</blockquote>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PERFORMANCE SECTION -->
        <div class="section">
            <h2>üîß PERFORMANCE</h2>

            <!-- Q15 -->
            <div class="question-box" id="q15">
                <div class="question-title">
                    <span class="badge badge-performance">Q15</span>
                    T·∫°i sao c·∫ßn Redis Cache, kh√¥ng ƒë·ªß PostgreSQL?
                </div>
                <div class="think-prompt">
                    üí≠ <strong>Suy nghƒ© tr∆∞·ªõc:</strong> Postgres c≈©ng c√≥ cache, sao c·∫ßn th√™m Redis?
                </div>
                <div class="answer-section">
                    <div class="answer-toggle" onclick="toggleAnswer(this)">
                        üí° Click ƒë·ªÉ xem ƒë√°p √°n
                    </div>
                    <div class="answer-content">
                        <h4>T·∫°i sao v·∫´n c·∫ßn Redis:</h4>
                        <table>
                            <tr>
                                <th>Ti√™u ch√≠</th>
                                <th>PostgreSQL</th>
                                <th>Redis</th>
                            </tr>
                            <tr>
                                <td>Response time</td>
                                <td>5-50ms</td>
                                <td>&lt;1ms</td>
                            </tr>
                            <tr>
                                <td>1000 requests/second</td>
                                <td>Connection exhaustion</td>
                                <td>Trivial</td>
                            </tr>
                            <tr>
                                <td>Computed data cache</td>
                                <td>Re-compute m·ªói l·∫ßn</td>
                                <td>Cache result</td>
                            </tr>
                            <tr>
                                <td>Session/Rate limit</td>
                                <td>Overkill</td>
                                <td>Perfect fit</td>
                            </tr>
                        </table>

                        <h4>Cache strategy:</h4>
                        <pre><code><span class="annotation">@Cacheable</span>(value = <span class="string">"products"</span>, key = <span class="string">"#id"</span>)
<span class="keyword">public</span> ProductResponse <span class="function">getProduct</span>(Long id) {
    <span class="keyword">return</span> productRepository.findById(id)
        .map(<span class="keyword">this</span>::toResponse)
        .orElseThrow();
}

<span class="annotation">@CacheEvict</span>(value = <span class="string">"products"</span>, key = <span class="string">"#id"</span>)
<span class="keyword">public void</span> <span class="function">updateProduct</span>(Long id, ProductRequest request) {
    <span class="comment">// Update DB ‚Üí Evict cache ‚Üí Next read s·∫Ω cache l·∫°i</span>
}</code></pre>

                        <div class="lesson-box">
                            <strong>üéØ B√†i h·ªçc t∆∞ duy:</strong>
                            <blockquote>"Use the right tool for the right job. RDBMS for persistence, Redis for speed."
                            </blockquote>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- THINKING FRAMEWORK -->
        <div class="framework-box">
            <h3>üéØ Framework T∆∞ Duy Gi·∫£i Quy·∫øt V·∫•n ƒê·ªÅ</h3>
            <p>Khi g·∫∑p v·∫•n ƒë·ªÅ technical, h·ªèi:</p>
            <ol>
                <li><strong>What are the requirements?</strong> - Functional vs Non-functional</li>
                <li><strong>What are the options?</strong> - List √≠t nh·∫•t 2-3 alternatives</li>
                <li><strong>What are the trade-offs?</strong> - Pros/Cons c·ªßa m·ªói option</li>
                <li><strong>What constraints do we have?</strong> - Team size, Timeline, Budget</li>
                <li><strong>What's the migration path?</strong> - Can we evolve later?</li>
            </ol>
        </div>

        <!-- FINAL TIP -->
        <div class="tip-box">
            <h3>üí° Tip cu·ªëi cho ph·ªèng v·∫•n</h3>
            <p>Interviewer th∆∞·ªùng quan t√¢m <strong>T·∫†I SAO</strong> b·∫°n ch·ªçn solution h∆°n l√† <strong>C√ÅI G√å</strong> l√†
                solution.</p>
            <p>H√£y lu√¥n gi·∫£i th√≠ch:</p>
            <ul>
                <li>C√°c options b·∫°n ƒë√£ consider</li>
                <li>Trade-offs c·ªßa m·ªói option</li>
                <li>L√Ω do cu·ªëi c√πng ch·ªçn option n√†y</li>
            </ul>
            <blockquote style="margin-top: 15px; font-style: italic; color: #ffd700;">
                "Anyone can copy a solution from Stack Overflow. Engineers understand WHY it works and WHEN it doesn't."
            </blockquote>
        </div>

        <footer>
            <p>Generated by Antigravity AI Assistant</p>
            <p style="margin-top: 10px;">Deep "WHY" Questions - Interview Preparation v1.0</p>
        </footer>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose'
        });

        function toggleAnswer(element) {
            const content = element.nextElementSibling;
            content.classList.toggle('show');
            if (content.classList.contains('show')) {
                element.innerHTML = 'üìñ ·∫®n ƒë√°p √°n';
            } else {
                element.innerHTML = 'üí° Click ƒë·ªÉ xem ƒë√°p √°n';
            }
        }
    </script>
</body>

</html>