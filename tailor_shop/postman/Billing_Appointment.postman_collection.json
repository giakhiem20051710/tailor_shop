{
  "info": {
    "name": "Tailor Shop - Billing & Appointment",
    "_postman_id": "b4b6c2c4-aaaa-4e3f-9c1f-collection-demo",
    "description": "Collection test nhanh cho Billing & Appointment.\nSử dụng biến {{base_url}} và {{token}} (Bearer).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth - Login (placeholder)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": "{{base_url}}/api/v1/auth/login",
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\": \"admin\",\n  \"password\": \"password\"\n}"
        }
      }
    },
    {
      "name": "Appointment - Available Slots",
      "request": {
        "method": "GET",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/appointments/available-slots?staffId={{staffId}}&date={{date}}&duration=30",
          "query": [
            { "key": "staffId", "value": "{{staffId}}" },
            { "key": "date", "value": "{{date}}" },
            { "key": "duration", "value": "30" }
          ]
        }
      }
    },
    {
      "name": "Appointment - Create",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" },
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": "{{base_url}}/api/v1/appointments",
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": 1,\n  \"customerId\": {{customerId}},\n  \"staffId\": {{staffId}},\n  \"type\": \"fitting\",\n  \"appointmentDate\": \"{{date}}\",\n  \"appointmentTime\": \"09:00:00\",\n  \"notes\": \"Đo thử\"\n}"
        }
      }
    },
    {
      "name": "Appointment - Close Dates",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" },
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": "{{base_url}}/api/v1/appointments/working-slots/close-dates",
        "body": {
          "mode": "raw",
          "raw": "{\n  \"staffId\": {{staffId}},\n  \"dates\": [\"{{date}}\"],\n  \"reason\": \"Nghỉ lễ\"\n}"
        }
      }
    },
    {
      "name": "Billing - Create Invoice",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" },
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": "{{base_url}}/api/v1/invoices",
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": 1,\n  \"customerId\": {{customerId}},\n  \"staffId\": {{staffId}},\n  \"currency\": \"VND\",\n  \"discountAmount\": 0,\n  \"taxAmount\": 0,\n  \"dueDate\": \"{{date}}\",\n  \"items\": [\n    {\"name\": \"Sewing service\", \"quantity\": 1, \"unitPrice\": 500000, \"discountAmount\": 0, \"taxRate\": 0}\n  ]\n}"
        }
      }
    },
    {
      "name": "Billing - Add Payment (cash)",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" },
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": "{{base_url}}/api/v1/invoices/payments",
        "body": {
          "mode": "raw",
          "raw": "{\n  \"invoiceId\": {{invoiceId}},\n  \"provider\": \"cash\",\n  \"amount\": 500000\n}"
        }
      }
    },
    {
      "name": "Billing - List Invoices",
      "request": {
        "method": "GET",
        "header": [
          { "key": "Authorization", "value": "Bearer {{token}}" }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/invoices?page=0&size=10",
          "query": [
            { "key": "page", "value": "0" },
            { "key": "size", "value": "10" }
          ]
        }
      }
    }
  ],
  "variable": [
    { "key": "base_url", "value": "http://localhost:8080" },
    { "key": "token", "value": "" },
    { "key": "staffId", "value": "1" },
    { "key": "customerId", "value": "1" },
    { "key": "invoiceId", "value": "1" },
    { "key": "date", "value": "2024-12-25" }
  ]
}

