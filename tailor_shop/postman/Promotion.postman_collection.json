{
  "info": {
    "name": "Tailor Shop - Promotion",
    "_postman_id": "promotion-collection-2024",
    "description": "Collection test cho Promotion module.\nSử dụng biến {{base_url}} và {{token}} (Bearer).\n\nPublic: Xem danh sách, chi tiết\nAdmin/Staff: CRUD, activate/deactivate\nCustomer: Apply promo code, xem lịch sử",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth - Login",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "url": "{{base_url}}/api/v1/auth/login",
        "body": {
          "mode": "raw",
          "raw": "{\n  \"username\": \"customer1\",\n  \"password\": \"password\"\n}"
        }
      }
    },
    {
      "name": "Promotions - Public",
      "item": [
        {
          "name": "List Active Public Promotions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/active?page=0&size=20",
              "query": [
                { "key": "page", "value": "0" },
                { "key": "size", "value": "20" }
              ]
            }
          }
        },
        {
          "name": "List All Promotions (with filter)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions?status=ACTIVE&type=PERCENTAGE&page=0&size=20",
              "query": [
                { "key": "status", "value": "ACTIVE" },
                { "key": "type", "value": "PERCENTAGE" },
                { "key": "keyword", "value": "" },
                { "key": "isPublic", "value": "" },
                { "key": "page", "value": "0" },
                { "key": "size", "value": "20" }
              ]
            }
          }
        },
        {
          "name": "Promotion Detail by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/{{promotionId}}",
              "query": []
            }
          }
        },
        {
          "name": "Promotion Detail by Code",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/code/{{promotionCode}}",
              "query": []
            }
          }
        }
      ]
    },
    {
      "name": "Promotions - Admin/Staff",
      "item": [
        {
          "name": "Create Promotion - Percentage",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/v1/promotions",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"GIAM20\",\n  \"name\": \"Giảm 20% cho đơn hàng từ 500k\",\n  \"description\": \"Áp dụng cho tất cả sản phẩm, tối đa 100k\",\n  \"type\": \"PERCENTAGE\",\n  \"discountPercentage\": 20.00,\n  \"maxDiscountAmount\": 100000,\n  \"minOrderValue\": 500000,\n  \"startDate\": \"2024-01-01\",\n  \"endDate\": \"2024-12-31\",\n  \"maxUsageTotal\": 1000,\n  \"maxUsagePerUser\": 3,\n  \"isPublic\": true,\n  \"isSingleUse\": false,\n  \"priority\": 10,\n  \"image\": \"https://s3.example.com/promo.jpg\",\n  \"bannerText\": \"Giảm ngay 20%\"\n}"
            }
          }
        },
        {
          "name": "Create Promotion - Fixed Amount",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/v1/promotions",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"GIAM50K\",\n  \"name\": \"Giảm 50k cho đơn từ 500k\",\n  \"type\": \"FIXED_AMOUNT\",\n  \"discountAmount\": 50000,\n  \"minOrderValue\": 500000,\n  \"startDate\": \"2024-01-01\",\n  \"endDate\": \"2024-12-31\",\n  \"isPublic\": true\n}"
            }
          }
        },
        {
          "name": "Create Promotion - For Specific Products",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/v1/promotions",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"SHIRT20\",\n  \"name\": \"Giảm 20% cho áo sơ mi\",\n  \"type\": \"PERCENTAGE\",\n  \"discountPercentage\": 20.00,\n  \"applicableProductIds\": [1, 2, 3],\n  \"applicableCategoryIds\": [\"shirt\"],\n  \"startDate\": \"2024-01-01\",\n  \"endDate\": \"2024-12-31\",\n  \"isPublic\": true\n}"
            }
          }
        },
        {
          "name": "Create Promotion - Buy X Get Y",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/v1/promotions",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"MUA2TANG1\",\n  \"name\": \"Mua 2 tặng 1\",\n  \"type\": \"BUY_X_GET_Y\",\n  \"buyQuantity\": 2,\n  \"getQuantity\": 1,\n  \"getProductId\": 10,\n  \"startDate\": \"2024-01-01\",\n  \"endDate\": \"2024-12-31\",\n  \"isPublic\": true\n}"
            }
          }
        },
        {
          "name": "Create Promotion - Private (VIP)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/v1/promotions",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"VIP100K\",\n  \"name\": \"Mã riêng VIP - Giảm 100k\",\n  \"type\": \"FIXED_AMOUNT\",\n  \"discountAmount\": 100000,\n  \"minOrderValue\": 500000,\n  \"applicableUserGroup\": \"VIP\",\n  \"isPublic\": false,\n  \"startDate\": \"2024-01-01\",\n  \"endDate\": \"2024-12-31\"\n}"
            }
          }
        },
        {
          "name": "Update Promotion",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/{{promotionId}}",
              "query": []
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"GIAM20\",\n  \"name\": \"Giảm 20% cho đơn hàng từ 500k (Updated)\",\n  \"description\": \"Mô tả đã cập nhật\",\n  \"type\": \"PERCENTAGE\",\n  \"discountPercentage\": 25.00,\n  \"maxDiscountAmount\": 150000\n}"
            }
          }
        },
        {
          "name": "Delete Promotion",
          "request": {
            "method": "DELETE",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/{{promotionId}}",
              "query": []
            }
          }
        },
        {
          "name": "Activate Promotion",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/{{promotionId}}/activate",
              "query": []
            }
          }
        },
        {
          "name": "Deactivate Promotion",
          "request": {
            "method": "PATCH",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/{{promotionId}}/deactivate",
              "query": []
            }
          }
        },
        {
          "name": "List Promotion Usages (All)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/{{promotionId}}/usages?page=0&size=20",
              "query": [
                { "key": "page", "value": "0" },
                { "key": "size", "value": "20" }
              ]
            }
          }
        },
        {
          "name": "List Promotion Usages (By User)",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/{{promotionId}}/usages?userId={{userId}}&page=0&size=20",
              "query": [
                { "key": "userId", "value": "{{userId}}" },
                { "key": "page", "value": "0" },
                { "key": "size", "value": "20" }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Promotions - Customer",
      "item": [
        {
          "name": "Apply Promo Code",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/v1/promotions/apply",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"{{promotionCode}}\",\n  \"orderAmount\": 600000,\n  \"productIds\": [1, 2, 3],\n  \"categoryIds\": [\"shirt\", \"pants\"]\n}"
            }
          }
        },
        {
          "name": "Apply Promo Code - Invalid (Below Min Order)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" },
              { "key": "Content-Type", "value": "application/json" }
            ],
            "url": "{{base_url}}/api/v1/promotions/apply",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"{{promotionCode}}\",\n  \"orderAmount\": 300000,\n  \"productIds\": [1, 2]\n}"
            }
          }
        },
        {
          "name": "List My Usages",
          "request": {
            "method": "GET",
            "header": [
              { "key": "Authorization", "value": "Bearer {{token}}" }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/promotions/my-usages?page=0&size=20",
              "query": [
                { "key": "page", "value": "0" },
                { "key": "size", "value": "20" }
              ]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    { "key": "base_url", "value": "http://localhost:8080" },
    { "key": "token", "value": "" },
    { "key": "promotionId", "value": "1" },
    { "key": "promotionCode", "value": "GIAM20" },
    { "key": "userId", "value": "1" }
  ]
}

