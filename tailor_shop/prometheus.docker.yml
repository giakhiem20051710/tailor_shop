# Prometheus Configuration for Docker Compose Full Setup
# Use this when running all services in Docker

global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  # Scrape Spring Boot App metrics
  - job_name: 'tailor-shop-app'
    metrics_path: '/actuator/prometheus'
    static_configs:
      # Use service name from docker-compose when app runs in container
      - targets: ['app:8083']
        labels:
          application: 'tailor-shop'
          environment: 'docker'
    # Fallback: Use host.docker.internal when app runs on host
    # - targets: ['host.docker.internal:8083']
    #   labels:
    #     application: 'tailor-shop'
    #     environment: 'dev'

  # Scrape Prometheus itself
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
        labels:
          application: 'prometheus'

